#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
language: java
jdk:
- openjdk8
dist: bionic
notifications:
  email:
    recipients:
    - dev@dattack.com
    on_success: always
    on_failure: always
  slack:
    secure: Ow2kNNMMefF905Z2Fy1/dZdCu5gC8xZ0bkiE3GjN5Ib3lcA3xpeerglg+3rey5N2FQLwN6/dkatzqu/pyM+MjAAtDGrbBYBNZ2n2n4/ckpnetpgTob+dKXcN7s/I/7eLnQ+eeOh1LP5ww3c6q2v1ofrTZwb5qH4Q5KjpMwuid7O01lBsX+QwOsPQdDLjLhndgzTi+uktgFoLO9uax65JrVHsqDy3orARX7/boVBtO9MuEf5BWFPI2oEOSPK2lWXx9FadezWJyHb3Iigrk10D2uVMXZh4GWuRSX7CjIp5UjU546f10WdBNPG811wHlygSEfCHaLKNQYPCzpQvXWJdfiRBJQ1ZHW5pceyZxgsFXKrxIedQrE3calVl/6bGThBF4RiqQ+Ar7R8N5JOV3T0qVMZ2crg7HJOphxAuS1t18ZzLX9XFQHugmrq2nJeKB3EwqFfgDS8eyRmGM1xJIz7b+pnzspSvhR7e5BCLxOYf7rKq8kDDxWwd7kcbfHTz6j/jvuj8zQoXrQnUbbC9IkGefg11vVdFQhYiMeaZSYF1hleDoR/7P7N9I/Q0DldIDC/2EBywTeTj4cVreFKp9Hydgk90gAtHHp0tetKN4SRNl1SsovZxz0NZnwxc/YtbDuNOmsKxsJ7kFuqXZLnS7JTkH5K7Ra4C1BkS5/ddoBtt2PE=
cache:
  directories:
  - "~/.m2/repository"
env:
  global:
  - secure: gB4qDOnW8jGfSLkS2HDPCCcACzRC8AsAHm5EHksnjzpwfl6ylq9LcECvBxzD2vVhAi5suJ+YWREiUPGkmJdQ3nQaPrW6KnQ13afmcj5vgyprHIG0Cur9/dHbo63Qy3cy9pUSYbT9ndcqpP3ukmf8r6mbD72qC2xda802c5+d7bLsWvH4p51QQ1f5RhwgVrscj3yO0MY2AIFLNF+ZYspNMVxds0ux+nzZUwa5R6Ci7HZWe8wX2K9AwjUYUOm5s8jQ0tzMp+sV6/+N3pwxr9skvEze99ftt8i23BbSiKOZpng5Q8C0ZWrNiRzH4JgLgEo8cF5yjU9MQPA5NmWBfcAN1/lWhlEDrJqEbpCqWbsrpyzhvArI1W5SCrr0yofSMM1uVUDc1wYJ+1FjdzK8QPA05bAc1CV+u5ouT+3LTDuYVZTh/tZCJS4wQ7Ox0ojh2RPFM2YT80ZSye58WAk/vWNxhVqDBlH+W0UQx7YO7igpDmjQ2xH5IMsVg2RtFWdezR6dkDfAhNSmgjYbkM2R19CnIJWYf+FdIDziAcZGjP6PxDovTVQQV4BICkoqtTmNg06GSNDYNur2ussY0XFWUjALLjYUs4LggGVqp4u8my4Z1XIXfZwGSFRds5zQGvo/L/LefuzsFvFRvx5ti41qprsy3ELucHJdfiyXDWeA8D92dtM=
  - secure: CTE5crjZNFpJPIuqrCjG8ox8FlJ6l8Npvkl9kOdZ4B+18vP7ScuRRaswHQngqO1f0at9A8Gif0BAYsYLrNoSeP4Xamsgyp3UEPzkL43ZiJCWa+jP50CtrxjRWZBPac4VZAkvPvaxyC89oJIbM9/9WE4rtbQ0EQOmeAQitv6INVKgC0KGygkag2vLQnB+yF/flBXrHo/CFpyFCZowbf8a/LuFACeh+EjYyzkK6xk16Xxn5jGvFe7SqX03n2r7C9VfTuWHVk8JNT1EJdkJ3CsehIsHvVBZHp0gRb15+9y3BOt/G7Gl45ML/y53cJNub0zP/Uzkh4awYVSPZ9oKWkZZLAewmZ4LOJKlD2/rBaEdML1jxzKtYRR4ol857QE6psCcrrG5PufWl0td1jA4k4qklM1EeRXLI+6Hsbm9oRMUN/jGA+3W1Trd21zsWI6RpMauzJCoQKM93bn1uxXYsL7E39BeaUKsffr4w45BdtIq0lpVKwJxiZZsI5wzdo7ZQNO46m82O8i341I95fGqlsgqUlLtLM0Sl6Wo/VAbMWFRz9SEPu/U4AqWGw3b+6yUwYFj3ZfHbs1qcljepAw+SD7FTJEg5ii1uqu69ICMJmkZoMT6S22bS9JiWXNeOUw0VbJJzwKT1vVPj5nts0ZAwqm7JavImWUt8PGbBPMhGog/XUE=
  - secure: a0RQDLG4bnds380BLaES+Ru4M/UJh4wgNLD+rO/19YVEaukKf/JpeLEQFRByDVSCdygRmuQkEHmlr4LO5LfkD3amFvLvs/M/42KAYz4hyPuV+Zgl32093wGAm+D2afWRUsiSgI5xLBO4zILhki58MWcL1f4hYaZg9iQ0ZwYI2ST61kooJyAYgWOoL6vFpp3l37tkr8Xm+PLC2KrrDgpstEUh0A4RDbCXkIQ25XRCTDosnYgu9vOrws2LutHlCWWpbdOYkqDhlZZQYxulzzSc75hiUjqx3pkFgoLE5Jn2iPDMg/qz5G7AV9s8vOl3580fGy5h/7V4k3Z8i0xtimXqYhIotnBAN2DMSJ8+5rXhdXqxetxxZum/n/LB4K+qxJ6Y8yV0GhxBssNmJ24ZPtwozJ1IwOLcTe9W8QK85izGblpKMGfBCPxuR2LpeJYJ+umy6YAjve5h/xH4Gk4Bu46RBop6CR49JrBezwP8xH8yiCBgwye1GRfCyFqwOuE0Os0ibL7YaG7+PBUFcSEHd7Mb3Vm9NvpOc5ppB90aUW9BJkpoYEMRdcHe63gBoW7WSRfQy1HQFuC37Vggl6VrgsvfiQKCSAk4tYkYoDI+WippxuGFmkyAsC5Tir+IY3mry6Sw66AeQ9iC9Ydx2cSVBjLRZyyva6st8XPluQetgaC49rE=
  - secure: QfGp3NyqSVFMnsk/OApnc2IcjK/IEv3y9Ahu2wNz8JrL4I2oIoTjMZfzTrNU62mZPCdc5hzx5DUbBluvwV4dsr6i0qePnyCpVBHsLEmCUxnhQ4CHW4EJXfFmLmwNOiKtF04Tq/9Lr12iV262s9c/cCAPz6DwahUMSwnxy9hmWhgU8mph/Fet6M4vOWSooZs2yP9MrP2ihHKaek9zpc8PNypflbCaEMI1XT0zLrqXLUDatiKuaPCNL9tg3XJ6JtIWzl5cs2558TB6jJMKVkOzmq8lcy3j4AMkgwO2U9kxmrp/5stBJd91Hz2Eyoi2ayACZsmNi8lmZCEWKRYteM3zzGUsfz0i1C6x80wWqAlQ+PjwksqvQJFivLnFvYbUBJ3qq8a+JmbDfLMIy2aWj8ZFL2E9BDYNZNPvRzBhzm049RzwB/osDdC5gOK5y6g9qOZbiajvyUOhrnePcGx9Evs4Z2vZUJrd9BYEjon9VcPzwB7aqgXnuZfK7TeU/1Vof1Q1JjdPdhPuExDAg5Qz0LVVXPVpbKbBTZ2yb/C5yeRNJld8KjJx34NNC9X0vrntakSB91uz3GsKCVWU380o1yPXjdMR653hdkA9ulVkpDqkEGJL2bBGGJmQA11gvwfhGwerPLOUlSn8EP5bgU1pyUM4H8Z3A1JQXUjM+JH5u/xzqP4=
install: mvn -P !build-extras install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn -P !build-extras test -B
before_install:
- openssl aes-256-cbc -K $encrypted_711e5bbf5b76_key -iv $encrypted_711e5bbf5b76_iv
  -in .travis/codesigning.asc.enc -out .travis/codesigning.asc -d
- gpg --batch --fast-import .travis/codesigning.asc
deploy:
  skip_cleanup: true
  provider: script
  script: mvn -P sign,build-extras -s .travis/settings.xml deploy -DskipTests
  on:
    all_branches: true
    condition: "$TRAVIS_BRANCH =~ ^(master|develop)$"
